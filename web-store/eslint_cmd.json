[{"filePath":"D:\\AlmaStore\\web-store\\app\\api\\chat\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2124,2127],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2124,2127],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":62,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2625,2628],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2625,2628],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createClient } from \"@/lib/supabase/server\";\r\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\nconst apiKey = process.env.GEMINI_API_KEY!;\r\nconst genAI = new GoogleGenerativeAI(apiKey);\r\n\r\nexport async function POST(req: Request) {\r\n    try {\r\n        const { messages } = await req.json();\r\n\r\n        if (!messages || !Array.isArray(messages)) {\r\n            return NextResponse.json(\r\n                { error: \"Format request tidak valid. Harap sediakan array messages.\" },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        const supabase = await createClient();\r\n\r\n        // Context Loading (Lightweight)\r\n        let contextString = \"Kamu adalah AI Assistant untuk Alma Shop, toko e-commerce yang menjual sarung premium bergaya 'Heritage Modernity'.\\n\";\r\n        contextString += \"Bantulah customer dengan sopan, berikan informasi terkait produk, fitur, dan proses pemesanan.\\n\";\r\n        contextString += \"Alma Shop memadukan nilai tradisional Nusantara dengan gaya hidup masa kini.\\n\";\r\n\r\n        // Grab up to 5 highest featured products to know about\r\n        const { data: featured } = await supabase\r\n            .from(\"products\")\r\n            .select(\"name, price, material, description\")\r\n            .eq(\"is_featured\", true)\r\n            .limit(5);\r\n\r\n        if (featured && featured.length > 0) {\r\n            contextString += \"\\nBeberapa produk unggulan kami (bisa dijadikan referensi rekomendasi):\\n\";\r\n            featured.forEach(p => {\r\n                contextString += `- ${p.name} (Material: ${p.material || 'Premium'}) - Rp ${p.price.toLocaleString('id-ID')}\\n  Deskripsi: ${p.description || 'Sarung tenun premium'}\\n`;\r\n            });\r\n        }\r\n\r\n        const model = genAI.getGenerativeModel({\r\n            model: \"gemini-1.5-flash\",\r\n            systemInstruction: contextString,\r\n        });\r\n\r\n        // Formatting messages from {role: 'user'|'assistant', content: string} to Gemini format {role: 'user'|'model', parts: [{text: string}]}\r\n        const geminiHistory = messages.slice(0, -1).map((msg: any) => ({\r\n            role: msg.role === 'assistant' ? 'model' : 'user',\r\n            parts: [{ text: msg.content }]\r\n        }));\r\n\r\n        const latestMessage = messages[messages.length - 1].content;\r\n\r\n        const chat = model.startChat({\r\n            history: geminiHistory,\r\n        });\r\n\r\n        const result = await chat.sendMessage(latestMessage);\r\n        const responseText = result.response.text();\r\n\r\n        return NextResponse.json({ reply: responseText });\r\n\r\n    } catch (error: any) {\r\n        console.error(\"Chat API Error:\", error);\r\n        return NextResponse.json(\r\n            { error: \"Terjadi kesalahan internal saat memproses chat.\" },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\app\\auth\\callback\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\app\\auth\\layout.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":47,"column":29,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2295,2435],"text":"\r\n                            &quot;Menghadirkan pesona wastra Nusantara dalam setiap hembusan gaya hidup modern Anda.\"\r\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2295,2435],"text":"\r\n                            &ldquo;Menghadirkan pesona wastra Nusantara dalam setiap hembusan gaya hidup modern Anda.\"\r\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2295,2435],"text":"\r\n                            &#34;Menghadirkan pesona wastra Nusantara dalam setiap hembusan gaya hidup modern Anda.\"\r\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2295,2435],"text":"\r\n                            &rdquo;Menghadirkan pesona wastra Nusantara dalam setiap hembusan gaya hidup modern Anda.\"\r\n                        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":47,"column":112,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2295,2435],"text":"\r\n                            \"Menghadirkan pesona wastra Nusantara dalam setiap hembusan gaya hidup modern Anda.&quot;\r\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2295,2435],"text":"\r\n                            \"Menghadirkan pesona wastra Nusantara dalam setiap hembusan gaya hidup modern Anda.&ldquo;\r\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2295,2435],"text":"\r\n                            \"Menghadirkan pesona wastra Nusantara dalam setiap hembusan gaya hidup modern Anda.&#34;\r\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2295,2435],"text":"\r\n                            \"Menghadirkan pesona wastra Nusantara dalam setiap hembusan gaya hidup modern Anda.&rdquo;\r\n                        "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ChevronLeft } from \"lucide-react\";\r\nimport { Metadata } from \"next\";\r\nimport Link from \"next/link\";\r\n\r\nexport const metadata: Metadata = {\r\n    title: \"Autentikasi | Alma Shop\",\r\n    description: \"Masuk atau daftar untuk berbelanja di Alma Shop.\",\r\n};\r\n\r\nexport default function AuthLayout({\r\n    children,\r\n}: {\r\n    children: React.ReactNode;\r\n}) {\r\n    return (\r\n        <div className=\"min-h-screen grid lg:grid-cols-2 relative h-full\">\r\n            {/* Back button overlay */}\r\n            <Link\r\n                href=\"/\"\r\n                className=\"absolute top-8 left-8 z-10 hidden md:flex items-center gap-2 text-sm font-medium hover:text-primary transition-colors bg-background/50 backdrop-blur-sm px-4 py-2 rounded-full border border-border\"\r\n            >\r\n                <ChevronLeft className=\"h-4 w-4\" />\r\n                Kembali ke Beranda\r\n            </Link>\r\n\r\n            {/* Left side: Image/Branding */}\r\n            <div className=\"hidden lg:flex flex-col relative bg-muted p-10 text-white overflow-hidden justify-between\">\r\n                {/* Background Image using absolute element to apply styling over it */}\r\n                <div\r\n                    className=\"absolute inset-0 bg-cover bg-center brightness-[0.7] transform scale-105 hover:scale-110 transition-transform duration-1000\"\r\n                    style={{ backgroundImage: \"url('https://images.unsplash.com/photo-1596484552834-6a58f850e0a1?q=80&w=2670&auto=format&fit=crop')\" }}\r\n                ></div>\r\n                {/* Gradient Overlay for legibility */}\r\n                <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-black/20 z-0\"></div>\r\n\r\n                {/* Content over image */}\r\n                <div className=\"relative z-10\">\r\n                    <Link href=\"/\" className=\"font-display text-4xl font-bold tracking-tight text-white mb-2 block\">\r\n                        Alma <span className=\"text-primary/90\">Shop</span>\r\n                    </Link>\r\n                    <p className=\"text-white/80 max-w-sm\">Authentic Heritage.</p>\r\n                </div>\r\n\r\n                <div className=\"relative z-10 max-w-md\">\r\n                    <blockquote className=\"space-y-2\">\r\n                        <p className=\"text-lg font-medium leading-relaxed\">\r\n                            \"Menghadirkan pesona wastra Nusantara dalam setiap hembusan gaya hidup modern Anda.\"\r\n                        </p>\r\n                        <footer className=\"text-sm text-white/70\">Pusat Belanja Wastra Premium</footer>\r\n                    </blockquote>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            {/* Right side: Form (Takes full width on mobile) */}\r\n            <div className=\"flex flex-col justify-center items-center p-6 sm:p-12 lg:p-24 bg-background\">\r\n                {/* Mobile Logo View (if image side collapses) */}\r\n                <div className=\"mb-8 lg:hidden flex self-start w-full justify-between items-center\">\r\n                    <Link href=\"/\" className=\"font-display text-3xl font-bold tracking-tight text-primary\">\r\n                        Alma Shop\r\n                    </Link>\r\n                    <Link href=\"/\" className=\"flex items-center gap-1 text-sm font-medium text-muted-foreground hover:text-foreground\">\r\n                        <ChevronLeft className=\"h-4 w-4\" /> Batal\r\n                    </Link>\r\n                </div>\r\n\r\n                <div className=\"w-full max-w-[400px] flex flex-col justify-center space-y-6\">\r\n                    {children}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\app\\auth\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\app\\auth\\register\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\app\\auth\\signout\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\app\\cart\\page.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\AlmaStore\\web-store\\app\\cart\\page.tsx:22:9\n  20 |\n  21 |     useEffect(() => {\n> 22 |         setMounted(true);\n     |         ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  23 |     }, []);\n  24 |\n  25 |     if (!mounted) {","line":22,"column":9,"nodeType":null,"endLine":22,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { formatCurrency } from \"@/lib/constants\";\r\nimport { useStore } from \"@/store/useStore\";\r\nimport { ArrowRight, Minus, Plus, ShoppingBag, Trash2 } from \"lucide-react\";\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport default function CartPage() {\r\n    const [mounted, setMounted] = useState(false);\r\n\r\n    const cartItems = useStore((state) => state.cart.items);\r\n    const updateQuantity = useStore((state) => state.updateQuantity);\r\n    const removeFromCart = useStore((state) => state.removeFromCart);\r\n\r\n    // Need to compute total inside component instead of getCartTotal() hook to keep it reactive to state updates nicely if destructuring. Or we can just use the state directly.\r\n    const cartTotal = cartItems.reduce((sum, item) => sum + (item.discountPrice ?? item.price) * item.quantity, 0);\r\n\r\n    useEffect(() => {\r\n        setMounted(true);\r\n    }, []);\r\n\r\n    if (!mounted) {\r\n        return (\r\n            <div className=\"container mx-auto px-4 lg:px-8 py-12 md:py-20 min-h-[60vh] flex items-center justify-center\">\r\n                <div className=\"animate-pulse w-full max-w-4xl space-y-8\">\r\n                    <div className=\"h-10 bg-muted rounded w-1/4\"></div>\r\n                    <div className=\"h-40 bg-muted rounded w-full\"></div>\r\n                    <div className=\"h-40 bg-muted rounded w-full\"></div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (cartItems.length === 0) {\r\n        return (\r\n            <div className=\"container mx-auto px-4 lg:px-8 py-16 md:py-32 min-h-[60vh] flex flex-col items-center justify-center text-center\">\r\n                <div className=\"w-24 h-24 bg-primary/10 rounded-full flex items-center justify-center mb-6\">\r\n                    <ShoppingBag className=\"h-12 w-12 text-primary\" />\r\n                </div>\r\n                <h1 className=\"text-3xl font-display font-bold mb-4\">Keranjang Belanja Kosong</h1>\r\n                <p className=\"text-muted-foreground max-w-md mb-8\">\r\n                    Sepertinya Anda belum menambahkan produk apapun ke keranjang. Mari temukan koleksi terbaik kami.\r\n                </p>\r\n                <Link href=\"/products\">\r\n                    <Button size=\"lg\" className=\"rounded-full px-8\">Mulai Belanja</Button>\r\n                </Link>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"container mx-auto px-4 lg:px-8 py-8 md:py-12\">\r\n            <h1 className=\"text-3xl lg:text-4xl font-display font-bold mb-8\">Keranjang Belanja</h1>\r\n\r\n            <div className=\"flex flex-col lg:flex-row gap-12 text-foreground\">\r\n\r\n                {/* Cart Items List */}\r\n                <div className=\"flex-1 space-y-6\">\r\n                    <div className=\"hidden md:grid grid-cols-12 gap-4 pb-4 border-b border-border text-sm font-semibold text-muted-foreground uppercase tracking-wider\">\r\n                        <div className=\"col-span-6\">Produk</div>\r\n                        <div className=\"col-span-3 text-center\">Kuantitas</div>\r\n                        <div className=\"col-span-3 text-right\">Total Harga</div>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col gap-6\">\r\n                        {cartItems.map((item) => (\r\n                            <div key={item.productId} className=\"flex flex-col md:grid md:grid-cols-12 gap-4 items-center pb-6 border-b border-border/50\">\r\n                                {/* Product Info */}\r\n                                <div className=\"col-span-6 flex items-center gap-4 w-full\">\r\n                                    <div className=\"relative w-20 h-20 sm:w-24 sm:h-24 shrink-0 rounded-lg overflow-hidden bg-muted border border-border\">\r\n                                        <Image\r\n                                            src={item.imageUrl || '/images/sarung-placeholder.jpg'}\r\n                                            alt={item.name}\r\n                                            fill\r\n                                            className=\"object-cover\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"flex flex-col flex-1\">\r\n                                        <Link href={`/products/${item.productId}`} className=\"font-semibold text-base hover:text-primary transition-colors line-clamp-2\">\r\n                                            {item.name}\r\n                                        </Link>\r\n                                        <div className=\"mt-1 flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2\">\r\n                                            <span className=\"text-primary font-medium text-sm\">\r\n                                                {formatCurrency(item.discountPrice ?? item.price)}\r\n                                            </span>\r\n                                            {item.discountPrice && item.discountPrice < item.price && (\r\n                                                <span className=\"text-xs text-muted-foreground line-through decoration-muted-foreground/50\">\r\n                                                    {formatCurrency(item.price)}\r\n                                                </span>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Quantity Control & Mobile Total Container */}\r\n                                <div className=\"col-span-6 md:col-span-6 flex items-center justify-between w-full md:grid md:grid-cols-6 md:gap-4 mt-2 md:mt-0\">\r\n                                    {/* Quantity Mobile/Desktop */}\r\n                                    <div className=\"md:col-span-3 flex justify-center w-full sm:w-auto\">\r\n                                        <div className=\"flex items-center rounded-lg border border-border bg-card\">\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"icon\"\r\n                                                className=\"h-8 w-8 text-muted-foreground hover:text-foreground\"\r\n                                                onClick={() => updateQuantity(item.productId, item.quantity - 1)}\r\n                                                disabled={item.quantity <= 1}\r\n                                            >\r\n                                                <Minus className=\"h-3 w-3\" />\r\n                                            </Button>\r\n                                            <div className=\"w-10 text-center font-medium text-sm\">{item.quantity}</div>\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"icon\"\r\n                                                className=\"h-8 w-8 text-muted-foreground hover:text-foreground\"\r\n                                                onClick={() => updateQuantity(item.productId, item.quantity + 1)}\r\n                                            // Ideally check stock here but cart schema might not have stock limit stored\r\n                                            >\r\n                                                <Plus className=\"h-3 w-3\" />\r\n                                            </Button>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Total & Delete */}\r\n                                    <div className=\"md:col-span-3 flex justify-end items-center gap-4 md:w-full\">\r\n                                        <span className=\"font-bold text-base md:text-lg whitespace-nowrap hidden sm:block\">\r\n                                            {formatCurrency((item.discountPrice ?? item.price) * item.quantity)}\r\n                                        </span>\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"text-muted-foreground hover:text-destructive hover:bg-destructive/10 shrink-0\"\r\n                                            onClick={() => removeFromCart(item.productId)}\r\n                                            title=\"Hapus dari keranjang\"\r\n                                        >\r\n                                            <Trash2 className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Order Summary Sidebar */}\r\n                <div className=\"w-full lg:w-[380px] shrink-0\">\r\n                    <div className=\"bg-muted/30 rounded-2xl p-6 lg:p-8 border border-border sticky top-24\">\r\n                        <h2 className=\"text-xl font-semibold mb-6\">Ringkasan Pesanan</h2>\r\n\r\n                        <div className=\"space-y-4 mb-6 text-sm\">\r\n                            <div className=\"flex justify-between text-muted-foreground\">\r\n                                <span>Subtotal</span>\r\n                                <span className=\"text-foreground\">{formatCurrency(cartTotal)}</span>\r\n                            </div>\r\n                            <div className=\"flex justify-between text-muted-foreground\">\r\n                                <span>Estimasi Pengiriman</span>\r\n                                <span className=\"text-foreground\">Dihitung di Checkout</span>\r\n                            </div>\r\n                            <div className=\"border-t border-border pt-4 mt-4 flex justify-between items-center font-bold text-lg\">\r\n                                <span>Total Keseluruhan</span>\r\n                                <span className=\"text-primary\">{formatCurrency(cartTotal)}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-4\">\r\n                            <Link href=\"/checkout\" className=\"block w-full\">\r\n                                <Button className=\"w-full h-14 text-base font-semibold group\" size=\"lg\">\r\n                                    Lanjut ke Checkout\r\n                                    <ArrowRight className=\"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform\" />\r\n                                </Button>\r\n                            </Link>\r\n                            <div className=\"text-center text-xs text-muted-foreground\">\r\n                                Pajak dan ongkos kirim akan dihitung pada tahap checkout.\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\app\\categories\\[slug]\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[721,724],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[721,724],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1736,1739],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1736,1739],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\app\\checkout\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":211,"column":96,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":211,"endColumn":99,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10238,10241],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10238,10241],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":247,"column":95,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":247,"endColumn":98,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12968,12971],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12968,12971],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'form' and 'supabase.auth'. Either include them or remove the dependency array.","line":80,"column":8,"nodeType":"ArrayExpression","endLine":80,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [form, supabase.auth]","fix":{"range":[3217,3219],"text":"[form, supabase.auth]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport { formatCurrency } from \"@/lib/constants\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { useStore } from \"@/store/useStore\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { ArrowLeft, CreditCard, Loader2, ShoppingBag, Truck } from \"lucide-react\";\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useEffect, useState, useTransition } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { toast } from \"sonner\";\r\nimport * as z from \"zod\";\r\n\r\nconst checkoutSchema = z.object({\r\n    recipientName: z.string().min(2, \"Nama penerima wajib diisi\"),\r\n    phoneNumber: z.string().min(8, \"Nomor token tidak valid\"),\r\n    addressLine: z.string().min(10, \"Alamat terlalu pendek\"),\r\n    city: z.string().min(3, \"Kota wajib diisi\"),\r\n    postalCode: z.string().min(5, \"Kode pos tidak valid\"),\r\n    shippingMethod: z.enum([\"standard\", \"express\"]),\r\n    paymentMethod: z.enum([\"bank_transfer\", \"qris\", \"ewallet\", \"cod\"]),\r\n});\r\n\r\ntype CheckoutValues = z.infer<typeof checkoutSchema>;\r\n\r\nconst SHIPPING_COST = {\r\n    standard: 15000,\r\n    express: 35000,\r\n};\r\n\r\nexport default function CheckoutPage() {\r\n    const router = useRouter();\r\n    const [mounted, setMounted] = useState(false);\r\n    const [isPending, startTransition] = useTransition();\r\n    const supabase = createClient();\r\n\r\n    const cartItems = useStore((s) => s.cart.items);\r\n    const clearCart = useStore((s) => s.clearCart);\r\n\r\n    const cartTotal = cartItems.reduce((sum, item) => sum + (item.discountPrice ?? item.price) * item.quantity, 0);\r\n\r\n    const form = useForm<CheckoutValues>({\r\n        resolver: zodResolver(checkoutSchema),\r\n        defaultValues: {\r\n            recipientName: \"\",\r\n            phoneNumber: \"\",\r\n            addressLine: \"\",\r\n            city: \"\",\r\n            postalCode: \"\",\r\n            shippingMethod: \"standard\",\r\n            paymentMethod: \"bank_transfer\",\r\n        },\r\n    });\r\n\r\n    const selectedShipping = form.watch(\"shippingMethod\");\r\n    const shippingCost = SHIPPING_COST[selectedShipping] || 15000;\r\n    const isFreeShipping = selectedShipping === \"standard\" && cartTotal > 500000;\r\n    const finalTotal = isFreeShipping ? cartTotal : cartTotal + shippingCost;\r\n    const grandTotal = cartTotal + shippingCost; // Used purely for UI if needed\r\n\r\n    // Fetch current user and prefill default address if available\r\n    useEffect(() => {\r\n        setMounted(true);\r\n        async function loadUserData() {\r\n            const { data: { user } } = await supabase.auth.getUser();\r\n            if (user) {\r\n                // Auto-fill some details\r\n                form.setValue(\"recipientName\", user.user_metadata?.full_name || \"\");\r\n            }\r\n        }\r\n        loadUserData();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    if (!mounted) return null; // Wait for client hydration\r\n\r\n    if (cartItems.length === 0) {\r\n        return (\r\n            <div className=\"container mx-auto px-4 py-20 text-center flex flex-col items-center justify-center\">\r\n                <h1 className=\"text-2xl font-bold mb-4\">Keranjang Anda Kosong</h1>\r\n                <p className=\"text-muted-foreground mb-8\">Tidak ada item untuk dilanjutkan ke checkout.</p>\r\n                <Link href=\"/products\">\r\n                    <Button>Mulai Belanja</Button>\r\n                </Link>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const onSubmit = (data: CheckoutValues) => {\r\n        startTransition(async () => {\r\n            const { data: { user } } = await supabase.auth.getUser();\r\n            if (!user) {\r\n                toast.error(\"Harap login terlebih dahulu.\");\r\n                router.push(\"/auth/login?redirect=/checkout\");\r\n                return;\r\n            }\r\n\r\n            // Format address payload\r\n            const fullAddress = `${data.recipientName} (${data.phoneNumber})\\n${data.addressLine}\\n${data.city}, ${data.postalCode}`;\r\n\r\n            // 1. Create Order\r\n            const { data: order, error: orderError } = await supabase\r\n                .from(\"orders\")\r\n                .insert({\r\n                    user_id: user.id,\r\n                    total_amount: finalTotal,\r\n                    status: \"pending\", // Waiting for payment\r\n                    shipping_address: fullAddress,\r\n                    // Storing payment method/shipping could be separate columns, but for simplicity we rely on status.\r\n                })\r\n                .select()\r\n                .single();\r\n\r\n            if (orderError || !order) {\r\n                toast.error(\"Gagal membuat pesanan\", { description: orderError?.message });\r\n                return;\r\n            }\r\n\r\n            // 2. Insert Order Items\r\n            const orderItemsToInsert = cartItems.map(item => ({\r\n                order_id: order.id,\r\n                product_id: item.productId,\r\n                quantity: item.quantity,\r\n                price_at_purchase: item.discountPrice ?? item.price,\r\n            }));\r\n\r\n            const { error: itemsError } = await supabase.from(\"order_items\").insert(orderItemsToInsert);\r\n\r\n            if (itemsError) {\r\n                toast.error(\"Gagal menyimpan item pesanan\");\r\n                return; // Needs rollback ideally, but MVP\r\n            }\r\n\r\n            // Success\r\n            clearCart();\r\n            toast.success(\"Pesanan Berhasil Dibuat!\", {\r\n                description: `ID Pesanan: ${order.id}. Silahkan lakukan pembayaran.`,\r\n            });\r\n            router.push(`/orders/${order.id}`); // Proceed to specific order view/payment instructions\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className=\"container mx-auto px-4 lg:px-8 py-8 md:py-12\">\r\n            <div className=\"mb-8\">\r\n                <Link href=\"/cart\" className=\"inline-flex items-center text-sm font-medium text-muted-foreground hover:text-foreground mb-4\">\r\n                    <ArrowLeft className=\"h-4 w-4 mr-1\" /> Kembali ke Keranjang\r\n                </Link>\r\n                <h1 className=\"text-3xl lg:text-4xl font-display font-bold\">Checkout</h1>\r\n            </div>\r\n\r\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"flex flex-col lg:flex-row gap-8 lg:gap-12\">\r\n                {/* Left: Input Forms */}\r\n                <div className=\"flex-1 space-y-8\">\r\n\r\n                    {/* Address */}\r\n                    <Card className=\"border-border shadow-none\">\r\n                        <CardHeader>\r\n                            <CardTitle className=\"flex items-center text-lg\"><Truck className=\"mr-2 h-5 w-5 text-primary\" /> Informasi Pengiriman</CardTitle>\r\n                            <CardDescription>Ke mana kami harus mengirimkan pesanan Anda?</CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent className=\"space-y-4\">\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"recipientName\">Nama Penerima</Label>\r\n                                    <Input id=\"recipientName\" {...form.register(\"recipientName\")} />\r\n                                    {form.formState.errors.recipientName && <p className=\"text-xs text-destructive\">{form.formState.errors.recipientName.message}</p>}\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"phoneNumber\">Nomor Telepon</Label>\r\n                                    <Input id=\"phoneNumber\" type=\"tel\" {...form.register(\"phoneNumber\")} />\r\n                                    {form.formState.errors.phoneNumber && <p className=\"text-xs text-destructive\">{form.formState.errors.phoneNumber.message}</p>}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"addressLine\">Alamat Lengkap (Jalan, RT/RW, Patokan)</Label>\r\n                                <Input id=\"addressLine\" {...form.register(\"addressLine\")} />\r\n                                {form.formState.errors.addressLine && <p className=\"text-xs text-destructive\">{form.formState.errors.addressLine.message}</p>}\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"city\">Kota / Kabupaten</Label>\r\n                                    <Input id=\"city\" {...form.register(\"city\")} />\r\n                                    {form.formState.errors.city && <p className=\"text-xs text-destructive\">{form.formState.errors.city.message}</p>}\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"postalCode\">Kode Pos</Label>\r\n                                    <Input id=\"postalCode\" {...form.register(\"postalCode\")} />\r\n                                    {form.formState.errors.postalCode && <p className=\"text-xs text-destructive\">{form.formState.errors.postalCode.message}</p>}\r\n                                </div>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Shipping Method */}\r\n                    <Card className=\"border-border shadow-none\">\r\n                        <CardHeader>\r\n                            <CardTitle className=\"flex items-center text-lg\">Metode Pengiriman</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <RadioGroup\r\n                                onValueChange={(val) => form.setValue(\"shippingMethod\", val as any)}\r\n                                defaultValue={form.getValues(\"shippingMethod\")}\r\n                                className=\"space-y-3\"\r\n                            >\r\n                                <label className={`flex items-start justify-between p-4 rounded-xl border cursor-pointer transition-colors ${selectedShipping === \"standard\" ? \"border-primary bg-primary/5\" : \"border-border hover:border-primary/50\"}`}>\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <RadioGroupItem value=\"standard\" id=\"std\" />\r\n                                        <div>\r\n                                            <p className=\"font-semibold text-sm\">Reguler (Standard)</p>\r\n                                            <p className=\"text-xs text-muted-foreground mt-0.5\">Estimasi tiba dalam 3-5 hari kerja</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <span className=\"font-medium text-sm\">{formatCurrency(SHIPPING_COST.standard)}</span>\r\n                                </label>\r\n\r\n                                <label className={`flex items-start justify-between p-4 rounded-xl border cursor-pointer transition-colors ${selectedShipping === \"express\" ? \"border-primary bg-primary/5\" : \"border-border hover:border-primary/50\"}`}>\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <RadioGroupItem value=\"express\" id=\"exp\" />\r\n                                        <div>\r\n                                            <p className=\"font-semibold text-sm\">Kilat (Express)</p>\r\n                                            <p className=\"text-xs text-muted-foreground mt-0.5\">Estimasi tiba dalam 1-2 hari kerja</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <span className=\"font-medium text-sm\">{formatCurrency(SHIPPING_COST.express)}</span>\r\n                                </label>\r\n                            </RadioGroup>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Payment Method */}\r\n                    <Card className=\"border-border shadow-none\">\r\n                        <CardHeader>\r\n                            <CardTitle className=\"flex items-center text-lg\"><CreditCard className=\"mr-2 h-5 w-5 text-primary\" /> Metode Pembayaran</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <RadioGroup\r\n                                onValueChange={(val) => form.setValue(\"paymentMethod\", val as any)}\r\n                                defaultValue={form.getValues(\"paymentMethod\")}\r\n                                className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\"\r\n                            >\r\n                                {[\r\n                                    { id: \"bank_transfer\", label: \"Transfer Bank\", desc: \"BCA, Mandiri, BNI, dll\" },\r\n                                    { id: \"qris\", label: \"QRIS\", desc: \"Bayar instant dengan scan\" },\r\n                                    { id: \"ewallet\", label: \"E-Wallet\", desc: \"GoPay, OVO, Dana\" },\r\n                                    { id: \"cod\", label: \"Bayar di Tempat\", desc: \"Bayar saat kurir tiba\" },\r\n                                ].map((method) => (\r\n                                    <label key={method.id} className={`flex items-start p-4 rounded-xl border cursor-pointer transition-colors ${form.getValues(\"paymentMethod\") === method.id ? \"border-primary bg-primary/5\" : \"border-border hover:border-primary/50\"}`}>\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <RadioGroupItem value={method.id} id={method.id} />\r\n                                            <div>\r\n                                                <p className=\"font-semibold text-sm\">{method.label}</p>\r\n                                                <p className=\"text-xs text-muted-foreground\">{method.desc}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </label>\r\n                                ))}\r\n                            </RadioGroup>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                </div>\r\n\r\n                {/* Right: Summary */}\r\n                <div className=\"w-full lg:w-[400px] shrink-0\">\r\n                    <Card className=\"border-border shadow-none sticky top-24 bg-muted/20\">\r\n                        <CardHeader>\r\n                            <CardTitle className=\"flex items-center text-lg\"><ShoppingBag className=\"mr-2 h-5 w-5\" /> Ringkasan Pesanan</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"space-y-4 mb-6\">\r\n                                {cartItems.map((item) => (\r\n                                    <div key={item.productId} className=\"flex gap-3\">\r\n                                        <div className=\"relative w-16 h-16 rounded-md overflow-hidden bg-muted flex-shrink-0\">\r\n                                            <Image src={item.imageUrl} alt={item.name} fill className=\"object-cover\" />\r\n                                            <span className=\"absolute top-0 right-0 bg-primary text-white text-[10px] w-5 h-5 flex items-center justify-center rounded-bl-md font-bold\">\r\n                                                {item.quantity}\r\n                                            </span>\r\n                                        </div>\r\n                                        <div className=\"flex-1 flex flex-col min-w-0\">\r\n                                            <p className=\"text-sm font-medium leading-tight truncate\">{item.name}</p>\r\n                                            <p className=\"text-xs text-muted-foreground mt-1\">{formatCurrency(item.discountPrice ?? item.price)}</p>\r\n                                        </div>\r\n                                        <div className=\"font-semibold text-sm text-right shrink-0\">\r\n                                            {formatCurrency((item.discountPrice ?? item.price) * item.quantity)}\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            <div className=\"space-y-3 pt-4 border-t border-border border-dashed text-sm\">\r\n                                <div className=\"flex justify-between text-muted-foreground\">\r\n                                    <span>Subtotal Produk</span>\r\n                                    <span className=\"text-foreground\">{formatCurrency(cartTotal)}</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between text-muted-foreground\">\r\n                                    <span>Biaya Pengiriman</span>\r\n                                    <span className=\"text-foreground\">{formatCurrency(shippingCost)}</span>\r\n                                </div>\r\n                                {selectedShipping === \"standard\" && grandTotal > 500000 && (\r\n                                    <div className=\"flex justify-between text-alma-info text-xs\">\r\n                                        <span>Promo Free Ongkir</span>\r\n                                        <span>-{formatCurrency(shippingCost)}</span>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            <div className=\"flex justify-between items-center font-bold text-lg pt-4 mt-4 border-t border-border\">\r\n                                <span>Total Pembayaran</span>\r\n                                <span className=\"text-primary text-xl\">\r\n                                    {formatCurrency(selectedShipping === \"standard\" && grandTotal > 500000 ? cartTotal : grandTotal)}\r\n                                </span>\r\n                            </div>\r\n\r\n                            <Button type=\"submit\" size=\"lg\" className=\"w-full h-14 mt-8 font-semibold\" disabled={isPending}>\r\n                                {isPending ? <Loader2 className=\"mr-2 h-5 w-5 animate-spin\" /> : \"Buat Pesanan\"}\r\n                            </Button>\r\n                            <p className=\"text-center text-xs text-muted-foreground mt-4 leading-relaxed\">\r\n                                Dengan membuat pesanan, Anda menyetujui <Link href=\"#\" className=\"underline\">Syarat & Ketentuan</Link> serta <Link href=\"#\" className=\"underline\">Kebijakan Privasi</Link> Alma Shop.\r\n                            </p>\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\app\\orders\\[id]\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[902,905],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[902,905],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5052,5055],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5052,5055],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":104,"column":41,"nodeType":"JSXOpeningElement","endLine":104,"endColumn":180,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\app\\orders\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[428,431],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[428,431],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":59,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2819,2822],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2819,2822],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Badge } from \"@/components/ui/badge\";\r\nimport { formatCurrency } from \"@/lib/constants\";\r\nimport { createClient } from \"@/lib/supabase/server\";\r\nimport { CheckCircle2, Clock, MinusCircle, Package, PackageOpen, Truck } from \"lucide-react\";\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport { notFound, redirect } from \"next/navigation\";\r\n\r\nconst statusConfig: Record<string, { label: string, icon: any, color: string }> = {\r\n    pending: { label: \"Menunggu\", icon: Clock, color: \"bg-alma-info text-white\" },\r\n    paid: { label: \"Dibayar\", icon: CheckCircle2, color: \"bg-alma-success text-white\" },\r\n    processing: { label: \"Diproses\", icon: Package, color: \"bg-primary text-white\" },\r\n    shipped: { label: \"Dikirim\", icon: Truck, color: \"bg-primary text-white\" },\r\n    cancelled: { label: \"Dibatalkan\", icon: MinusCircle, color: \"bg-destructive text-white\" },\r\n};\r\n\r\nexport default async function OrdersPage() {\r\n    const supabase = await createClient();\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n\r\n    if (!user) {\r\n        redirect(\"/auth/login\");\r\n    }\r\n\r\n    // Fetch orders with their first item to display as preview\r\n    const { data: orders, error } = await supabase\r\n        .from(\"orders\")\r\n        .select(`\r\n      id, total_amount, status, created_at,\r\n      items:order_items(\r\n        quantity, price_at_purchase,\r\n        product:products(name, images)\r\n      )\r\n    `)\r\n        .eq(\"user_id\", user.id)\r\n        .order(\"created_at\", { ascending: false });\r\n\r\n    if (error || !orders) {\r\n        notFound();\r\n    }\r\n\r\n    return (\r\n        <div className=\"container mx-auto px-4 lg:px-8 py-8 md:py-12 max-w-4xl\">\r\n            <h1 className=\"text-3xl font-display font-bold mb-8\">Riwayat Pesanan</h1>\r\n\r\n            {orders.length === 0 ? (\r\n                <div className=\"text-center py-20 border border-dashed border-border rounded-xl bg-muted/20 flex flex-col items-center\">\r\n                    <PackageOpen className=\"w-16 h-16 text-muted-foreground mb-4 opacity-50\" />\r\n                    <h3 className=\"text-xl font-medium mb-2\">Belum ada pesanan</h3>\r\n                    <p className=\"text-muted-foreground mb-6\">Anda belum pernah melakukan pemesanan sebelumnya.</p>\r\n                    <Link href=\"/products\" className=\"inline-flex h-10 items-center justify-center rounded-md bg-primary px-8 text-sm font-medium text-primary-foreground shadow transition-colors hover:bg-primary/90\">\r\n                        Mulai Belanja\r\n                    </Link>\r\n                </div>\r\n            ) : (\r\n                <div className=\"space-y-6\">\r\n                    {orders.map((order) => {\r\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                        const firstItem = order.items?.[0] as any;\r\n                        const remainingItemsCount = (order.items?.length || 0) - 1;\r\n                        const statusData = statusConfig[order.status] || { label: order.status, icon: Clock, color: \"bg-muted text-foreground\" };\r\n                        const StatusIcon = statusData.icon;\r\n\r\n                        return (\r\n                            <Link key={order.id} href={`/orders/${order.id}`} className=\"block border border-border rounded-xl p-4 md:p-6 bg-card hover:bg-muted/10 transition-colors group\">\r\n                                <div className=\"flex flex-col md:flex-row md:items-center justify-between mb-4 pb-4 border-b border-border/50 gap-2\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <span className=\"text-sm font-mono text-muted-foreground\">#{order.id.slice(0, 8).toUpperCase()}</span>\r\n                                        <span className=\"text-muted-foreground text-xs\">{new Date(order.created_at).toLocaleDateString('id-ID', { year: 'numeric', month: 'long', day: 'numeric' })}</span>\r\n                                    </div>\r\n                                    <Badge variant=\"outline\" className={`border-none ${statusData.color} flex items-center gap-1.5 w-w-fit px-2 py-0.5`}>\r\n                                        <StatusIcon className=\"w-3 h-3\" />\r\n                                        {statusData.label}\r\n                                    </Badge>\r\n                                </div>\r\n\r\n                                <div className=\"flex items-start gap-4 flex-col sm:flex-row\">\r\n                                    {firstItem?.product?.images?.[0] ? (\r\n                                        <div className=\"w-20 h-20 rounded-lg overflow-hidden relative bg-muted border border-border shrink-0\">\r\n                                            <Image src={firstItem.product.images[0]} alt={firstItem.product.name} fill className=\"object-cover group-hover:scale-105 transition-transform\" />\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className=\"w-20 h-20 rounded-lg bg-muted flex items-center justify-center shrink-0\">\r\n                                            <Package className=\"w-8 h-8 text-muted-foreground\" />\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    <div className=\"flex-1\">\r\n                                        <h4 className=\"font-semibold text-base line-clamp-1\">{firstItem?.product?.name || 'Produk'}</h4>\r\n                                        <p className=\"text-sm text-muted-foreground mt-0.5\">\r\n                                            {firstItem?.quantity} barang x {formatCurrency(firstItem?.price_at_purchase || 0)}\r\n                                        </p>\r\n                                        {remainingItemsCount > 0 && (\r\n                                            <p className=\"text-xs text-muted-foreground mt-2 font-medium bg-muted w-fit px-2 py-0.5 rounded-full\">\r\n                                                + {remainingItemsCount} produk lainnya\r\n                                            </p>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    <div className=\"text-right sm:self-center mt-2 sm:mt-0 pt-2 sm:pt-0 border-t border-border/50 sm:border-0 w-full sm:w-auto\">\r\n                                        <span className=\"block text-xs text-muted-foreground mb-1\">Total Belanja</span>\r\n                                        <span className=\"font-bold text-lg text-primary\">{formatCurrency(order.total_amount)}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </Link>\r\n                        );\r\n                    })}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\app\\products\\[id]\\page.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-explicit-any').","line":44,"column":5,"severity":1,"nodeType":null,"fix":{"range":[1658,1720],"text":" "}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1756,1759],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1756,1759],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[911,914],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[911,914],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { ProductActions } from \"@/components/product/ProductActions\";\r\nimport { ProductGallery } from \"@/components/product/ProductGallery\";\r\nimport { ReviewList } from \"@/components/product/ReviewList\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { formatCurrency } from \"@/lib/constants\";\r\nimport { createClient } from \"@/lib/supabase/server\";\r\nimport { Product } from \"@/types\";\r\nimport { createClient as createStaticClient } from \"@supabase/supabase-js\";\r\nimport { Star } from \"lucide-react\";\r\nimport { Metadata } from \"next\";\r\nimport Link from \"next/link\";\r\nimport { notFound } from \"next/navigation\";\r\n\r\nconst getStaticSupabase = () => createStaticClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);\r\n\r\nexport async function generateMetadata(\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    props: { params: Promise<any> }\r\n): Promise<Metadata> {\r\n    const params = await props.params;\r\n    const id = params.id;\r\n    const supabase = getStaticSupabase();\r\n    const { data: product } = await supabase\r\n        .from(\"products\")\r\n        .select(\"name, description, images\")\r\n        .eq(\"id\", id)\r\n        .single();\r\n\r\n    if (!product) return { title: \"Produk Tidak Ditemukan\" };\r\n\r\n    return {\r\n        title: `${product.name} | Alma Shop`,\r\n        description: product.description || `Beli ${product.name} kualitas terbaik dengan harga spesial di Alma Shop.`,\r\n        openGraph: {\r\n            images: product.images && product.images.length > 0 ? [product.images[0]] : [],\r\n        }\r\n    };\r\n}\r\n\r\nexport default async function ProductDetailPage({\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    params,\r\n}: { params: Promise<any> }) {\r\n    const resolvedParams = await params;\r\n    const id = resolvedParams.id;\r\n    const supabase = await createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from(\"products\")\r\n        .select(`*, category:categories(name, slug)`)\r\n        .eq(\"id\", id)\r\n        .single();\r\n\r\n    if (error || !data) {\r\n        notFound();\r\n    }\r\n\r\n    const product = data as Product;\r\n\r\n    // Render Product Schema for SEO\r\n    const jsonLd = {\r\n        \"@context\": \"https://schema.org\",\r\n        \"@type\": \"Product\",\r\n        name: product.name,\r\n        image: product.images,\r\n        description: product.description,\r\n        sku: product.id,\r\n        offers: {\r\n            \"@type\": \"Offer\",\r\n            url: `${process.env.NEXT_PUBLIC_SITE_URL || 'http://localhost:3000'}/products/${product.id}`,\r\n            priceCurrency: \"IDR\",\r\n            price: product.price,\r\n            itemCondition: \"https://schema.org/NewCondition\",\r\n            availability: product.stock > 0 ? \"https://schema.org/InStock\" : \"https://schema.org/OutOfStock\",\r\n        },\r\n    };\r\n\r\n    const discountPercentage =\r\n        product.original_price && product.original_price > product.price\r\n            ? Math.round(((product.original_price - product.price) / product.original_price) * 100)\r\n            : 0;\r\n\r\n    return (\r\n        <div className=\"container mx-auto px-4 lg:px-8 py-8 md:py-12\">\r\n            {/* Inject JSON-LD Schema */}\r\n            <script\r\n                type=\"application/ld+json\"\r\n                dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }}\r\n            />\r\n\r\n            {/* Breadcrumb Navigation - Simple version */}\r\n            <nav className=\"flex items-center space-x-2 text-sm text-muted-foreground mb-8\">\r\n                <Link href=\"/\" className=\"hover:text-primary transition-colors\">Beranda</Link>\r\n                <span>/</span>\r\n                <Link href=\"/products\" className=\"hover:text-primary transition-colors\">Produk</Link>\r\n                <span>/</span>\r\n                {product.category && (\r\n                    <>\r\n                        <Link href={`/categories/${product.category.slug}`} className=\"hover:text-primary transition-colors\">\r\n                            {product.category.name}\r\n                        </Link>\r\n                        <span>/</span>\r\n                    </>\r\n                )}\r\n                <span className=\"text-foreground truncate overflow-hidden max-w-[200px] sm:max-w-none\">{product.name}</span>\r\n            </nav>\r\n\r\n            <div className=\"flex flex-col lg:flex-row gap-10 xl:gap-16\">\r\n                {/* Left: Gallery */}\r\n                <div className=\"w-full lg:w-[45%] xl:w-1/2\">\r\n                    <ProductGallery images={product.images || []} />\r\n                </div>\r\n\r\n                {/* Right: Info Area */}\r\n                <div className=\"w-full lg:w-[55%] xl:w-1/2 flex flex-col\">\r\n                    {/* Title & Badges */}\r\n                    <div className=\"flex items-center gap-2 mb-3\">\r\n                        {product.is_featured && <Badge className=\"bg-alma-info text-white border-none\">Rekomendasi Teratas</Badge>}\r\n                        {product.category && <Badge variant=\"outline\" className=\"border-border text-primary font-mono bg-primary/5\">{product.category.name}</Badge>}\r\n                    </div>\r\n\r\n                    <h1 className=\"text-3xl lg:text-4xl font-display font-bold text-foreground mb-4 leading-tight\">\r\n                        {product.name}\r\n                    </h1>\r\n\r\n                    {/* Rating Snapshot */}\r\n                    <div className=\"flex items-center gap-4 mb-6 text-sm\">\r\n                        <div className=\"flex items-center gap-1 font-semibold text-foreground\">\r\n                            <Star className=\"h-4 w-4 fill-alma-warning text-alma-warning\" />\r\n                            <span>{product.rating?.toFixed(1) || \"0.0\"}</span>\r\n                        </div>\r\n                        <span className=\"text-muted-foreground\">|</span>\r\n                        <span className=\"text-muted-foreground\">Terjual {product.sold_count || 0}</span>\r\n                    </div>\r\n\r\n                    {/* Price */}\r\n                    <div className=\"flex items-end gap-3 mb-8\">\r\n                        <span className=\"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-orange-400\">\r\n                            {formatCurrency(product.price)}\r\n                        </span>\r\n                        {discountPercentage > 0 && product.original_price && (\r\n                            <div className=\"flex flex-col\">\r\n                                <span className=\"text-xs px-1.5 py-0.5 rounded-sm bg-destructive/10 text-destructive font-bold self-start mb-0.5 whitespace-nowrap\">\r\n                                    Hemat {discountPercentage}%\r\n                                </span>\r\n                                <span className=\"text-sm text-muted-foreground line-through decoration-muted-foreground/50\">\r\n                                    {formatCurrency(product.original_price)}\r\n                                </span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Description Snippet */}\r\n                    <div className=\"prose prose-sm text-muted-foreground mb-4 prose-p:leading-relaxed\">\r\n                        <p>{product.description}</p>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-y-2 text-sm text-muted-foreground mt-4 pb-6 mb-2 border-b border-border border-dashed\">\r\n                        {product.material && <div>Bahan: <span className=\"font-medium text-foreground\">{product.material}</span></div>}\r\n                        {product.care_instructions && <div className=\"col-span-2 mt-1\">Perawatan: <span className=\"font-medium text-foreground\">{product.care_instructions}</span></div>}\r\n                    </div>\r\n\r\n                    {/* User Actions */}\r\n                    <ProductActions product={product} />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Reviews Section */}\r\n            <ReviewList productId={product.id} />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\app\\products\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\app\\profile\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\app\\search\\page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":56,"column":92,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2367,2461],"text":"\r\n                            Kami tidak dapat menemukan produk yang cocok dengan kata kunci &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2367,2461],"text":"\r\n                            Kami tidak dapat menemukan produk yang cocok dengan kata kunci &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2367,2461],"text":"\r\n                            Kami tidak dapat menemukan produk yang cocok dengan kata kunci &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2367,2461],"text":"\r\n                            Kami tidak dapat menemukan produk yang cocok dengan kata kunci &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":56,"column":96,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2464,2575],"text":"&quot;.\r\n                            Coba gunakan kata kunci lain atau periksa ejaan Anda.\r\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2464,2575],"text":"&ldquo;.\r\n                            Coba gunakan kata kunci lain atau periksa ejaan Anda.\r\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2464,2575],"text":"&#34;.\r\n                            Coba gunakan kata kunci lain atau periksa ejaan Anda.\r\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2464,2575],"text":"&rdquo;.\r\n                            Coba gunakan kata kunci lain atau periksa ejaan Anda.\r\n                        "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ProductGrid } from \"@/components/product/ProductGrid\";\r\nimport { createClient } from \"@/lib/supabase/server\";\r\nimport { Metadata } from \"next\";\r\n\r\nexport const metadata: Metadata = {\r\n    title: \"Hasil Pencarian | Alma Shop\",\r\n    description: \"Cari produk sarung, batik, tenun, dan busana muslim premium di Alma Shop.\",\r\n};\r\n\r\ninterface SearchPageProps {\r\n    searchParams: Promise<{ [key: string]: string | string[] | undefined }>;\r\n}\r\n\r\nexport default async function SearchPage({ searchParams }: SearchPageProps) {\r\n    const params = await searchParams;\r\n    const q = typeof params.q === \"string\" ? params.q : \"\";\r\n    const page = typeof params.page === \"string\" ? parseInt(params.page) : 1;\r\n    const limit = 16;\r\n    const from = (page - 1) * limit;\r\n    const to = from + limit - 1;\r\n\r\n    const supabase = await createClient();\r\n\r\n    // Simple ilike search on name or description\r\n    let query = supabase\r\n        .from(\"products\")\r\n        .select(`*, category:categories(name, slug)`, { count: \"exact\" })\r\n        .eq(\"is_active\", true);\r\n\r\n    if (q) {\r\n        query = query.or(`name.ilike.%${q}%,description.ilike.%${q}%`);\r\n    }\r\n\r\n    query = query.order(\"created_at\", { ascending: false }).range(from, to);\r\n\r\n    const { data: products, count } = await query;\r\n\r\n    return (\r\n        <div className=\"container mx-auto px-4 lg:px-8 py-8\">\r\n            <div className=\"mb-8 border-b border-border pb-6 text-center md:text-left\">\r\n                <h1 className=\"text-3xl font-display font-bold\">\r\n                    {q ? `Hasil pencarian untuk \"${q}\"` : \"Pencarian Produk\"}\r\n                </h1>\r\n                <p className=\"text-muted-foreground mt-2\">\r\n                    Ditemukan {count || 0} produk yang cocok dengan pencarian Anda.\r\n                </p>\r\n            </div>\r\n\r\n            <div className=\"max-w-7xl mx-auto\">\r\n                {products && products.length > 0 ? (\r\n                    <ProductGrid products={products} columns={{ sm: 2, md: 3, lg: 4, xl: 4 }} />\r\n                ) : (\r\n                    <div className=\"flex flex-col items-center justify-center py-20 border border-dashed border-border rounded-xl bg-muted/20 text-center px-4\">\r\n                        <h3 className=\"text-xl font-medium mb-2\">Oops! Tidak ada hasil</h3>\r\n                        <p className=\"text-muted-foreground max-w-md\">\r\n                            Kami tidak dapat menemukan produk yang cocok dengan kata kunci \"{q}\".\r\n                            Coba gunakan kata kunci lain atau periksa ejaan Anda.\r\n                        </p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\app\\wishlist\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'toggleWishlist' is assigned a value but never used.","line":18,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":25}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'supabase'. Either include it or remove the dependency array.","line":50,"column":8,"nodeType":"ArrayExpression","endLine":50,"endColumn":32,"suggestions":[{"desc":"Update the dependencies array to be: [wishlistItems, mounted, supabase]","fix":{"range":[1579,1603],"text":"[wishlistItems, mounted, supabase]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { ProductCard } from \"@/components/product/ProductCard\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { useStore } from \"@/store/useStore\";\r\nimport { Product } from \"@/types\";\r\nimport { ArrowLeft, Heart } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport default function WishlistPage() {\r\n    const [mounted, setMounted] = useState(false);\r\n    const [products, setProducts] = useState<Product[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    const wishlistItems = useStore((state) => state.wishlist.items);\r\n    const toggleWishlist = useStore((state) => state.toggleWishlist);\r\n\r\n    const supabase = createClient();\r\n\r\n    useEffect(() => {\r\n        setMounted(true);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        async function fetchWishlistProducts() {\r\n            if (wishlistItems.length === 0) {\r\n                setProducts([]);\r\n                setIsLoading(false);\r\n                return;\r\n            }\r\n\r\n            setIsLoading(true);\r\n            const { data, error } = await supabase\r\n                .from(\"products\")\r\n                .select(\"*\")\r\n                .in(\"id\", wishlistItems);\r\n\r\n            if (!error && data) {\r\n                setProducts(data as Product[]);\r\n            }\r\n            setIsLoading(false);\r\n        }\r\n\r\n        if (mounted) {\r\n            fetchWishlistProducts();\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [wishlistItems, mounted]);\r\n\r\n    if (!mounted || isLoading) {\r\n        return (\r\n            <div className=\"container mx-auto px-4 lg:px-8 py-12 md:py-20 min-h-[60vh] flex items-center justify-center\">\r\n                <div className=\"animate-pulse w-full max-w-5xl space-y-8\">\r\n                    <div className=\"h-10 bg-muted rounded w-1/4 mb-12\"></div>\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\r\n                        {[1, 2, 3, 4].map((i) => (\r\n                            <div key={i} className=\"h-64 bg-muted rounded-xl w-full\"></div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"container mx-auto px-4 lg:px-8 py-8 md:py-12 max-w-7xl\">\r\n            <div className=\"mb-8\">\r\n                <Link href=\"/profile\" className=\"inline-flex items-center text-sm font-medium text-muted-foreground hover:text-foreground mb-4\">\r\n                    <ArrowLeft className=\"h-4 w-4 mr-1\" /> Profil\r\n                </Link>\r\n                <div className=\"flex items-center gap-3\">\r\n                    <h1 className=\"text-3xl lg:text-4xl font-display font-bold\">Wishlist Saya</h1>\r\n                    <span className=\"bg-primary/10 text-primary font-bold px-3 py-1 rounded-full text-sm\">\r\n                        {wishlistItems.length}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n\r\n            {products.length === 0 ? (\r\n                <div className=\"container mx-auto px-4 lg:px-8 py-16 md:py-24 min-h-[50vh] flex flex-col items-center justify-center text-center\">\r\n                    <div className=\"w-24 h-24 bg-primary/10 rounded-full flex items-center justify-center mb-6\">\r\n                        <Heart className=\"h-12 w-12 text-primary fill-primary/20\" />\r\n                    </div>\r\n                    <h2 className=\"text-2xl font-bold mb-4\">Wishlist Anda Kosong</h2>\r\n                    <p className=\"text-muted-foreground max-w-md mb-8\">\r\n                        Simpan sarung favorit Anda ke dalam wishlist agar mudah ditemukan kembali nanti.\r\n                    </p>\r\n                    <Link href=\"/products\">\r\n                        <Button size=\"lg\" className=\"rounded-full px-8\">Jelajahi Produk</Button>\r\n                    </Link>\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                    {products.map((product) => (\r\n                        <div key={product.id} className=\"relative group\">\r\n                            <ProductCard product={product} />\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\home\\CategoryGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\home\\FlashSaleSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\home\\HeroBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\layout\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\layout\\MobileMenu.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":87,"column":41,"nodeType":"JSXOpeningElement","endLine":87,"endColumn":136}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from \"@/components/ui/accordion\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetTrigger } from \"@/components/ui/sheet\";\r\nimport { SARUNG_CATEGORIES } from \"@/lib/constants\";\r\nimport { User } from \"@supabase/supabase-js\";\r\nimport { ChevronRight, Menu, Search, User as UserIcon } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { useState } from \"react\";\r\n\r\ninterface MobileMenuProps {\r\n    user: User | null;\r\n}\r\n\r\nexport function MobileMenu({ user }: MobileMenuProps) {\r\n    const [open, setOpen] = useState(false);\r\n\r\n    return (\r\n        <Sheet open={open} onOpenChange={setOpen}>\r\n            <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                    <Menu className=\"h-6 w-6\" />\r\n                </Button>\r\n            </SheetTrigger>\r\n            <SheetContent side=\"left\" className=\"w-[300px] sm:w-[350px] p-0 flex flex-col\">\r\n                <SheetHeader className=\"p-4 border-b border-border text-left\">\r\n                    <SheetTitle className=\"font-display text-2xl font-bold text-primary\">Alma Shop</SheetTitle>\r\n                </SheetHeader>\r\n\r\n                <div className=\"flex-1 overflow-y-auto px-4 py-6 space-y-6\">\r\n                    {/* Search */}\r\n                    <div className=\"relative\">\r\n                        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                        <Input\r\n                            placeholder=\"Cari produk...\"\r\n                            className=\"pl-9 bg-muted/50 w-full\"\r\n                        />\r\n                    </div>\r\n\r\n                    <Accordion type=\"single\" collapsible className=\"w-full\">\r\n                        <AccordionItem value=\"categories\" className=\"border-none\">\r\n                            <AccordionTrigger className=\"text-base font-medium hover:no-underline py-2\">\r\n                                Kategori Sarung\r\n                            </AccordionTrigger>\r\n                            <AccordionContent className=\"pt-2 pb-4 space-y-2\">\r\n                                {SARUNG_CATEGORIES.map((cat) => {\r\n                                    const slug = cat.toLowerCase().replace(/[\\s/]+/g, '-');\r\n                                    return (\r\n                                        <Link\r\n                                            key={slug}\r\n                                            href={`/categories/${slug}`}\r\n                                            onClick={() => setOpen(false)}\r\n                                            className=\"flex items-center justify-between py-2 text-muted-foreground hover:text-primary pl-4 border-l-2 border-transparent hover:border-primary transition-colors\"\r\n                                        >\r\n                                            {cat}\r\n                                            <ChevronRight className=\"h-4 w-4 opacity-50\" />\r\n                                        </Link>\r\n                                    );\r\n                                })}\r\n                            </AccordionContent>\r\n                        </AccordionItem>\r\n                    </Accordion>\r\n\r\n                    <nav className=\"flex flex-col space-y-4\">\r\n                        <Link href=\"/products\" onClick={() => setOpen(false)} className=\"text-base font-medium hover:text-primary transition-colors\">\r\n                            Semua Produk\r\n                        </Link>\r\n                        <Link href=\"/flash-sale\" onClick={() => setOpen(false)} className=\"text-base font-medium hover:text-primary transition-colors text-primary flex items-center gap-2\">\r\n                            Flash Sale\r\n                            <span className=\"bg-destructive/10 text-destructive text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wider\">Hot</span>\r\n                        </Link>\r\n                        <Link href=\"/about\" onClick={() => setOpen(false)} className=\"text-base font-medium hover:text-primary transition-colors\">\r\n                            Tentang Kami\r\n                        </Link>\r\n                    </nav>\r\n                </div>\r\n\r\n                {/* Footer actions based on auth */}\r\n                <div className=\"p-4 border-t border-border mt-auto bg-muted/20\">\r\n                    {user ? (\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"h-10 w-10 shrink-0 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold overflow-hidden\">\r\n                                    {user.user_metadata?.avatar_url ? (\r\n                                        <img src={user.user_metadata.avatar_url} alt=\"avatar\" className=\"h-full w-full object-cover\" />\r\n                                    ) : (\r\n                                        user.user_metadata?.full_name?.charAt(0) || 'U'\r\n                                    )}\r\n                                </div>\r\n                                <div className=\"flex flex-col overflow-hidden\">\r\n                                    <span className=\"font-medium truncate\">{user.user_metadata?.full_name || 'Pembeli'}</span>\r\n                                    <span className=\"text-xs text-muted-foreground truncate\">{user.email}</span>\r\n                                </div>\r\n                            </div>\r\n                            <Button asChild variant=\"outline\" className=\"w-full justify-start\" onClick={() => setOpen(false)}>\r\n                                <Link href=\"/profile\">\r\n                                    <UserIcon className=\"mr-2 h-4 w-4\" />\r\n                                    Profil Saya\r\n                                </Link>\r\n                            </Button>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"flex flex-col gap-2\">\r\n                            <Button asChild variant=\"default\" className=\"w-full bg-primary hover:bg-primary/90\" onClick={() => setOpen(false)}>\r\n                                <Link href=\"/auth/login\">Masuk</Link>\r\n                            </Button>\r\n                            <Button asChild variant=\"outline\" className=\"w-full\" onClick={() => setOpen(false)}>\r\n                                <Link href=\"/auth/register\">Daftar Akun Baru</Link>\r\n                            </Button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </SheetContent>\r\n        </Sheet>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\layout\\Navbar.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\AlmaStore\\web-store\\components\\layout\\Navbar.tsx:35:9\n  33 |\n  34 |     useEffect(() => {\n> 35 |         setMounted(true);\n     |         ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  36 |     }, []);\n  37 |\n  38 |     const handleLogout = async () => {","line":35,"column":9,"nodeType":null,"endLine":35,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n    DropdownMenu,\r\n    DropdownMenuContent,\r\n    DropdownMenuItem,\r\n    DropdownMenuSeparator,\r\n    DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { SARUNG_CATEGORIES } from \"@/lib/constants\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { useStore } from \"@/store/useStore\";\r\nimport { User } from \"@supabase/supabase-js\";\r\nimport { Heart, LogOut, Search, ShoppingBag, User as UserIcon } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { MobileMenu } from \"./MobileMenu\";\r\n\r\ninterface NavbarProps {\r\n    user: User | null;\r\n}\r\n\r\nexport function Navbar({ user }: NavbarProps) {\r\n    const [mounted, setMounted] = useState(false);\r\n    const cartItemCount = useStore((state) => state.getCartItemCount());\r\n    const supabase = createClient();\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        setMounted(true);\r\n    }, []);\r\n\r\n    const handleLogout = async () => {\r\n        await supabase.auth.signOut();\r\n        router.refresh(); // Refresh to recalculate server-side layout user data\r\n    };\r\n\r\n    return (\r\n        <header className=\"sticky top-0 z-50 w-full border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\r\n            <div className=\"container mx-auto px-4 lg:px-8\">\r\n                <div className=\"flex h-16 items-center justify-between gap-4\">\r\n\r\n                    {/* Mobile Menu & Logo */}\r\n                    <div className=\"flex items-center gap-4 lg:hidden\">\r\n                        <MobileMenu user={user} />\r\n                        <Link href=\"/\" className=\"font-display text-2xl font-bold tracking-tight text-primary\">\r\n                            Alma\r\n                        </Link>\r\n                    </div>\r\n\r\n                    {/* Desktop Logo & Navigation */}\r\n                    <div className=\"hidden lg:flex lg:items-center lg:gap-8\">\r\n                        <Link href=\"/\" className=\"font-display text-3xl font-bold tracking-tight text-primary\">\r\n                            Alma Shop\r\n                        </Link>\r\n                        <nav className=\"flex items-center gap-6 text-sm font-medium text-muted-foreground\">\r\n                            <Link href=\"/products\" className=\"hover:text-primary transition-colors\">\r\n                                Semua Produk\r\n                            </Link>\r\n                            <DropdownMenu>\r\n                                <DropdownMenuTrigger className=\"flex items-center gap-1 hover:text-primary transition-colors focus:outline-none\">\r\n                                    Kategori\r\n                                </DropdownMenuTrigger>\r\n                                <DropdownMenuContent align=\"start\" className=\"w-48\">\r\n                                    {SARUNG_CATEGORIES.map((cat) => {\r\n                                        const slug = cat.toLowerCase().replace(/[\\s/]+/g, '-');\r\n                                        return (\r\n                                            <DropdownMenuItem key={slug} asChild>\r\n                                                <Link href={`/categories/${slug}`} className=\"cursor-pointer\">\r\n                                                    {cat}\r\n                                                </Link>\r\n                                            </DropdownMenuItem>\r\n                                        );\r\n                                    })}\r\n                                </DropdownMenuContent>\r\n                            </DropdownMenu>\r\n                            <Link href=\"/about\" className=\"hover:text-primary transition-colors\">\r\n                                Tentang Kami\r\n                            </Link>\r\n                        </nav>\r\n                    </div>\r\n\r\n                    {/* Search Bar (Hidden on Mobile, shown in MobileMenu or expands) */}\r\n                    <div className=\"hidden md:flex flex-1 max-w-md ml-auto relative\">\r\n                        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none\" />\r\n                        <Input\r\n                            placeholder=\"Cari sarung impianmu...\"\r\n                            className=\"w-full pl-9 bg-muted/50 border-none focus-visible:ring-1 focus-visible:ring-primary\"\r\n                            onKeyDown={(e) => {\r\n                                if (e.key === 'Enter') {\r\n                                    const query = e.currentTarget.value;\r\n                                    if (query.trim()) {\r\n                                        router.push(`/search?q=${encodeURIComponent(query)}`);\r\n                                    }\r\n                                }\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Right Actions - Always visible */}\r\n                    <div className=\"flex items-center gap-2 md:gap-4 ml-auto lg:ml-0\">\r\n                        {/* Search icon for mobile only */}\r\n                        <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                            <Search className=\"h-5 w-5\" />\r\n                        </Button>\r\n\r\n                        {/* Cart */}\r\n                        <Link href=\"/cart\">\r\n                            <Button variant=\"ghost\" size=\"icon\" className=\"relative\">\r\n                                <ShoppingBag className=\"h-5 w-5\" />\r\n                                {mounted && cartItemCount > 0 && (\r\n                                    <Badge\r\n                                        className=\"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-[10px] bg-primary rounded-full border-2 border-background\"\r\n                                    >\r\n                                        {cartItemCount}\r\n                                    </Badge>\r\n                                )}\r\n                            </Button>\r\n                        </Link>\r\n\r\n                        {/* User Menu */}\r\n                        {user ? (\r\n                            <DropdownMenu>\r\n                                <DropdownMenuTrigger asChild>\r\n                                    <Button variant=\"ghost\" size=\"icon\" className=\"rounded-full\">\r\n                                        <Avatar className=\"h-8 w-8 border border-border\">\r\n                                            <AvatarImage src={user.user_metadata?.avatar_url} />\r\n                                            <AvatarFallback className=\"bg-primary/10 text-primary\">\r\n                                                {user.user_metadata?.full_name?.charAt(0) || 'U'}\r\n                                            </AvatarFallback>\r\n                                        </Avatar>\r\n                                    </Button>\r\n                                </DropdownMenuTrigger>\r\n                                <DropdownMenuContent align=\"end\" className=\"w-56\">\r\n                                    <div className=\"flex items-center justify-start gap-2 p-2\">\r\n                                        <div className=\"flex flex-col space-y-1 leading-none\">\r\n                                            <p className=\"font-medium text-sm\">{user.user_metadata?.full_name || 'Pembeli'}</p>\r\n                                            <p className=\"text-xs text-muted-foreground truncate\">{user.email}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <DropdownMenuSeparator />\r\n                                    <DropdownMenuItem asChild>\r\n                                        <Link href=\"/profile\" className=\"cursor-pointer w-full flex items-center\">\r\n                                            <UserIcon className=\"mr-2 h-4 w-4\" />\r\n                                            <span>Profil Saya</span>\r\n                                        </Link>\r\n                                    </DropdownMenuItem>\r\n                                    <DropdownMenuItem asChild>\r\n                                        <Link href=\"/orders\" className=\"cursor-pointer w-full flex items-center\">\r\n                                            <ShoppingBag className=\"mr-2 h-4 w-4\" />\r\n                                            <span>Pesanan Saya</span>\r\n                                        </Link>\r\n                                    </DropdownMenuItem>\r\n                                    <DropdownMenuItem asChild>\r\n                                        <Link href=\"/wishlist\" className=\"cursor-pointer w-full flex items-center\">\r\n                                            <Heart className=\"mr-2 h-4 w-4\" />\r\n                                            <span>Wishlist</span>\r\n                                        </Link>\r\n                                    </DropdownMenuItem>\r\n                                    <DropdownMenuSeparator />\r\n                                    <DropdownMenuItem onClick={handleLogout} className=\"cursor-pointer text-destructive focus:text-destructive\">\r\n                                        <LogOut className=\"mr-2 h-4 w-4\" />\r\n                                        <span>Keluar</span>\r\n                                    </DropdownMenuItem>\r\n                                </DropdownMenuContent>\r\n                            </DropdownMenu>\r\n                        ) : (\r\n                            <div className=\"hidden sm:flex items-center gap-2\">\r\n                                <Link href=\"/auth/login\">\r\n                                    <Button variant=\"ghost\" className=\"text-sm font-medium\">Masuk</Button>\r\n                                </Link>\r\n                                <Link href=\"/auth/register\">\r\n                                    <Button className=\"text-sm font-medium bg-primary hover:bg-primary/90\">Daftar</Button>\r\n                                </Link>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\product\\ProductActions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\product\\ProductCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\product\\ProductFilters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\product\\ProductFiltersMobile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\product\\ProductGallery.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\product\\ProductGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\product\\ReviewList.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":95,"column":107,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[5733,5734],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[5733,5734],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[5733,5734],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[5733,5734],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":95,"column":124,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[5750,5751],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[5750,5751],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[5750,5751],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[5750,5751],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'supabase'. Either include it or remove the dependency array.","line":40,"column":8,"nodeType":"ArrayExpression","endLine":40,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [productId, supabase]","fix":{"range":[1721,1732],"text":"[productId, supabase]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Progress } from \"@/components/ui/progress\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { Review } from \"@/types\";\r\nimport { Star, User } from \"lucide-react\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport function ReviewList({ productId }: { productId: string }) {\r\n    const [reviews, setReviews] = useState<Review[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const supabase = createClient();\r\n\r\n    // Basic stats\r\n    const totalReviews = reviews.length;\r\n    const averageRating = totalReviews > 0\r\n        ? reviews.reduce((sum, r) => sum + r.rating, 0) / totalReviews\r\n        : 0;\r\n\r\n    const ratingDistribution = [5, 4, 3, 2, 1].map(stars => ({\r\n        stars,\r\n        count: reviews.filter(r => r.rating === stars).length,\r\n        percentage: totalReviews > 0 ? (reviews.filter(r => r.rating === stars).length / totalReviews) * 100 : 0\r\n    }));\r\n\r\n    useEffect(() => {\r\n        async function fetchReviews() {\r\n            // Here we ideally join with profiles to get user_metadata\r\n            // Alternatively, if auth user creates review, grab the names from auth users table (requires edge fn/admin auth)\r\n            // For this MVP, we grab the review and assume `user_name` might be stored directly or fallback to Anonymous.\r\n            const { data } = await supabase\r\n                .from(\"reviews\")\r\n                .select(\"*\")\r\n                .eq(\"product_id\", productId)\r\n                .order(\"created_at\", { ascending: false });\r\n\r\n            if (data) setReviews(data as Review[]);\r\n            setIsLoading(false);\r\n        }\r\n        fetchReviews();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [productId]);\r\n\r\n    if (isLoading) {\r\n        return <div className=\"animate-pulse space-y-4 py-8\"><div className=\"h-20 bg-muted rounded-xl\"></div><div className=\"h-40 bg-muted rounded-xl\"></div></div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"mt-16 md:mt-24\">\r\n            <h2 className=\"text-2xl font-display font-bold mb-8\">Ulasan Pembeli ({totalReviews})</h2>\r\n\r\n            {totalReviews > 0 ? (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-12 gap-10\">\r\n                    {/* Summary Stats */}\r\n                    <div className=\"md:col-span-4 flex flex-col gap-6\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <div className=\"flex flex-col items-center justify-center p-6 bg-primary/10 rounded-2xl border border-primary/20 min-w-[120px]\">\r\n                                <span className=\"text-4xl font-bold text-primary\">{averageRating.toFixed(1)}</span>\r\n                                <div className=\"flex text-amber-500 mt-2\">\r\n                                    {[1, 2, 3, 4, 5].map((s) => (\r\n                                        <Star key={s} className={`w-4 h-4 ${s <= Math.round(averageRating) ? 'fill-amber-500' : 'text-muted-foreground opacity-30 fill-transparent'}`} />\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex flex-col gap-2 flex-1\">\r\n                                {ratingDistribution.map(({ stars, count, percentage }) => (\r\n                                    <div key={stars} className=\"flex items-center gap-2 text-sm\">\r\n                                        <span className=\"flex items-center w-12 shrink-0\">{stars} <Star className=\"w-3 h-3 fill-amber-500 text-amber-500 ml-1\" /></span>\r\n                                        <Progress value={percentage} className=\"h-2\" />\r\n                                        <span className=\"w-8 shrink-0 text-right text-muted-foreground text-xs\">{count}</span>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Reviews List */}\r\n                    <div className=\"md:col-span-8 flex flex-col gap-6\">\r\n                        {reviews.map((review) => (\r\n                            <div key={review.id} className=\"pb-6 border-b border-border/50 flex flex-col sm:flex-row gap-4\">\r\n                                <div className=\"w-12 h-12 rounded-full overflow-hidden bg-muted flex items-center justify-center shrink-0 border border-border\">\r\n                                    {/* Avatar mapping or generic fallback */}\r\n                                    <User className=\"h-6 w-6 text-muted-foreground/50\" />\r\n                                </div>\r\n                                <div className=\"flex-1\">\r\n                                    <div className=\"flex items-center justify-between mb-2\">\r\n                                        <span className=\"font-semibold text-sm\">Pembeli Rahasia</span>\r\n                                        <span className=\"text-xs text-muted-foreground\">\r\n                                            {new Date(review.created_at).toLocaleDateString('id-ID', { year: 'numeric', month: 'short', day: 'numeric' })}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div className=\"flex text-amber-500 mb-3\">\r\n                                        {[1, 2, 3, 4, 5].map((s) => (\r\n                                            <Star key={s} className={`w-3.5 h-3.5 ${s <= review.rating ? 'fill-amber-500' : 'text-muted-foreground opacity-30 fill-transparent'}`} />\r\n                                        ))}\r\n                                    </div>\r\n                                    <p className=\"text-sm text-foreground/90 leading-relaxed font-medium\">\"{review.comment}\"</p>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div className=\"py-12 bg-muted/20 border border-dashed border-border rounded-xl text-center flex flex-col items-center\">\r\n                    <Star className=\"w-12 h-12 text-muted-foreground opacity-20 mb-3\" />\r\n                    <h3 className=\"text-lg font-medium\">Belum Ada Ulasan</h3>\r\n                    <p className=\"text-sm text-muted-foreground mt-1\">Jadilah yang pertama memberikan ulasan untuk produk ini setelah membeli.</p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\chatbot-widget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\lib\\constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\lib\\supabase\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\lib\\supabase\\middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\lib\\supabase\\server.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\store\\useStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\AlmaStore\\web-store\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
